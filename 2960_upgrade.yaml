---
- name: Gather and Display Cisco Device Information
  hosts: cisco_devices
  gather_facts: no

  tasks:
    - name: Gather facts from Cisco devices
      ios_facts:
        gather_subset:
          - config
          - default
          - hardware

    - name: Generate HTML table
      set_fact:
        html_table: |
          <table border="1">
          <tr><th>Attribute</th><th>Value</th></tr>
          <tr><td>Hostname</td><td>{{ ansible_net_hostname }}</td></tr>
          <tr><td>Model</td><td>{{ ansible_net_model }}</td></tr>
          <!-- ... (other attributes) ... -->
          </table>

    - name: Display generated HTML table
      debug:
        var: html_table

    - name: Download a file from FTP server (as a test)
      uri:
        url: "ftp://cisco:cisco123@10.1.196.117/output.html"
        method: GET
        return_content: yes
        status_code: 200
      delegate_to: localhost
      register: ftp_response

    - debug:
        var: ftp_response.content
